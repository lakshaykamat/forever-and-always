<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Our Love Timer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins:wght@300;400;600&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Poppins", sans-serif;
        background: radial-gradient(circle, #1f1c2c, #928dab);
        color: #fff;
        overflow: hidden;
      }
      .romantic-font {
        font-family: "Great Vibes", cursive;
      }
      .gradient-text {
        background: linear-gradient(135deg, #fbc2eb, #a6c1ee);
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
      }
      .unit-toggle {
        position: absolute;
        bottom: 20px;
        right: 20px;
        z-index: 50;
        font-size: 0.6rem;
      }
      option {
        background: black;
        color: white;
        font-size: 0.6rem;
      }
      .bg-glass {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        border-radius: 1rem;
      }
      #unitSelect.hidden {
        display: none;
      }

      /* Smooth Transitions for Timer */
      #mainTimer,
      #unitLabel {
        transition: all 0.5s ease-out;
      }

      #loveQuote {
        opacity: 0;
        transition: opacity 1s ease-in-out;
      }

      .fadeIn {
        opacity: 1;
      }
    </style>
  </head>
  <body class="min-h-screen flex flex-col items-center justify-center p-4">
    <div class="absolute top-4 w-full text-center text-xl opacity-75">
      <span id="dateDisplay">Loading love...</span>
    </div>

    <div class="unit-toggle">
      <select
        title="Unit Selection"
        id="unitSelect"
        class="p-2 rounded bg-white/10 text-white"
      >
        <option value="single-weeks">Weeks</option>
        <option value="full">Years, Months, Days</option>
        <option value="ym">Years & Months</option>
        <option value="full-detail" selected>Detailed Time</option>
        <option value="single-days">Days</option>
        <option value="single-hours">Hours</option>
        <option value="single-minutes">Minutes</option>
        <option value="single-months">Months</option>
        <option value="single-years">Years</option>
      </select>
    </div>

    <h1
      class="text-4xl md:text-6xl romantic-font gradient-text mb-4 text-center"
    >
      Forever & Always
    </h1>
    <p class="text-lg md:text-xl italic text-pink-100 mb-6 text-center">
      Our journey of love began...
    </p>
    <div class="text-center text-4xl md:text-6xl font-light">
      <div id="mainTimer">Loading...</div>
      <div
        id="unitLabel"
        class="text-sm uppercase mt-2 tracking-widest text-pink-200"
      >
        Units
      </div>
    </div>

    <blockquote
      id="loveQuote"
      class="mt-8 italic text-pink-100 text-center text-lg max-w-lg mx-auto"
    ></blockquote>

    <script>
      const dateDisplay = document.getElementById("dateDisplay");
      const mainTimer = document.getElementById("mainTimer");
      const unitLabel = document.getElementById("unitLabel");
      const unitSelect = document.getElementById("unitSelect");
      const loveQuote = document.getElementById("loveQuote");

      const startDate = new Date("2025-04-25T23:30:00");
      let lastDiff = 0;

      async function fetchQuote() {
        try {
          const res = await fetch("https://api.quotable.io/random?tags=love");
          const data = await res.json();
          loveQuote.textContent = data.content;
          loveQuote.classList.add("fadeIn");
        } catch (err) {
          loveQuote.textContent =
            "Every moment with you is a beautiful memory in the making.";
          loveQuote.classList.add("fadeIn");
        }
      }

      function plural(unit, value) {
        return value === 1 ? unit : unit + "s";
      }

      function formatDetail(diff) {
        let seconds = Math.floor(diff / 1000);
        const minutes = Math.floor(seconds / 60);
        const hours = Math.floor(minutes / 60);
        const days = Math.floor(hours / 24);
        const remainingHours = hours % 24;
        const remainingMinutes = minutes % 60;
        const remainingSeconds = seconds % 60;
        return {
          text: `${days}d ${remainingHours}h ${remainingMinutes}m ${remainingSeconds}s`,
          label: "Days Hours Minutes Seconds",
        };
      }

      function updateDateHeader(diff) {
        const seconds = Math.floor(diff / 1000);
        const minutes = Math.floor(seconds / 60);
        const hours = Math.floor(minutes / 60);
        const days = Math.floor(hours / 24);
        const weeks = Math.floor(days / 7);
        const months = Math.floor(days / 30.44);
        const years = Math.floor(days / 365.25);

        const timeDiffText = new Intl.RelativeTimeFormat("en", {
          numeric: "auto",
        });
        let displayString = "";
        if (years > 0) displayString = timeDiffText.format(-years, "year");
        else if (months > 0)
          displayString = timeDiffText.format(-months, "month");
        else if (weeks > 0) displayString = timeDiffText.format(-weeks, "week");
        else if (days > 0) displayString = timeDiffText.format(-days, "day");
        else if (hours > 0) displayString = timeDiffText.format(-hours, "hour");
        else displayString = "just now";

        dateDisplay.textContent = `Our hearts met on April 25, 2025 at 11:30PM â€” ${displayString}`;
      }

      function updateSmoothly() {
        const now = new Date();
        const diff = now - startDate;
        const unitMode = unitSelect.value;

        if (unitMode === "full-detail") {
          const detail = formatDetail(diff);
          mainTimer.textContent = detail.text;
          unitLabel.textContent = detail.label;
        } else {
          let seconds = Math.floor(diff / 1000);
          const minutes = Math.floor(seconds / 60);
          const hours = Math.floor(minutes / 60);
          const days = Math.floor(hours / 24);
          const weeks = Math.floor(days / 7);
          const months = Math.floor(days / 30.44);
          const years = Math.floor(days / 365.25);
          const remainingYears = years;
          const remainingMonths = Math.floor((days % 365.25) / 30.44);
          const remainingDays = Math.floor(days % 30.44);

          if (unitMode === "full") {
            mainTimer.textContent = `${remainingYears}y ${remainingMonths}m ${remainingDays}d`;
            unitLabel.textContent = "Years Months Days";
          } else if (unitMode === "ym") {
            mainTimer.textContent = `${remainingYears}y ${remainingMonths}m`;
            unitLabel.textContent = "Years & Months";
          } else if (unitMode === "single-days") {
            mainTimer.textContent = days;
            unitLabel.textContent = plural("Day", days);
          } else if (unitMode === "single-hours") {
            mainTimer.textContent = hours;
            unitLabel.textContent = plural("Hour", hours);
          } else if (unitMode === "single-minutes") {
            mainTimer.textContent = minutes;
            unitLabel.textContent = plural("Minute", minutes);
          } else if (unitMode === "single-weeks") {
            mainTimer.textContent = weeks;
            unitLabel.textContent = plural("Week", weeks);
          } else if (unitMode === "single-months") {
            mainTimer.textContent = months;
            unitLabel.textContent = plural("Month", months);
          } else if (unitMode === "single-years") {
            mainTimer.textContent = years;
            unitLabel.textContent = plural("Year", years);
          }
        }

        
        updateDateHeader(diff);
        requestAnimationFrame(updateSmoothly);
      }

      fetchQuote();
      updateSmoothly();

      unitSelect.addEventListener("change", () => {
        unitSelect.classList.add("hidden");
      });
    </script>
  </body>
</html>
